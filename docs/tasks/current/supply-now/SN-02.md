# SN-02: Client Company Profile — Real Data & Settings

**ID:** SN-02 (previously BE-01.1, related to [SN-01](SN-01.md))
**Status:** :material-circle-outline: Not Started
**Priority:** Medium
**Estimated effort:** 8-12 hours

## Apps Affected

| App | Role | Impact |
|-----|------|--------|
| :material-cellphone: **Supply Now** | Client app — Profile screen | Core — replace mocked Company tab with real data |
| :material-server: **Django Backend** | API endpoints | Minor — endpoints already exist, may need adjustments |

## Description

Replace hardcoded "Acme Corporation" on the Supply Now Profile screen's **Company tab** with real client data from API. Display all companies linked to user via `ClientUserLink`. Enable Admin editing of company details and self-controlled settings. Show platform block status as read-only. Implement current client switching for multi-company users.

## Scope

**In scope:**

- Fetch user's clients via `/api/actors/client-user-link/?user={id}` API
- Display list of client companies on Company tab (dynamic tab title)
- Client card: name, official_name, VAT, address, logo, status
- `ClientSettingsSelfControlled` fields display and editing (Admin only)
- `ClientControlledByPlatform.is_blocked` read-only display
- Role-based access (Admin edit, Manager read-only)
- Current client switcher (multi-client)
- Order blocking for blocked clients
- Login-time warning for fully-blocked users

**Out of scope:**

- Creating new clients from app
- Deleting clients
- Managing `ClientSupplierLink` (covered by SN-01)
- Supplier-controlled settings
- Client address CRUD (separate task)

## Success Criteria

- [ ] Company tab shows real data from API (no hardcoded values)
- [ ] Tab title: "Company" (1) or "Companies (N)" (multiple)
- [ ] Client fields: name, official_name, VAT, address, logo
- [ ] `ClientSettingsSelfControlled` visible and editable by Admin
- [ ] `ClientControlledByPlatform.is_blocked` shown read-only with message
- [ ] Admin can edit company details; Manager sees read-only + "contact admin" hint
- [ ] Current client switcher works (multiple clients)
- [ ] Blocked client cannot be set as primary
- [ ] Order creation blocked for blocked clients
- [ ] No regressions on Personal and Suppliers tabs

## Key Risks

| Risk | Severity | Description |
|------|----------|-------------|
| API data gaps | :material-alert-outline: Medium | `client-user-link` may not return full client details (need nested serializer) |
| Platform block enforcement | :material-alert: High | Must be enforced both in UI and API |
| No admin test data | :material-alert-outline: Medium | Need seed data with ClientUserLink role=ADMIN |

---

!!! tip "Full task details"
    [:material-file-document-outline: View full task details](../details/BE-01.1-full.md) — benchmarks, components, implementation phases
