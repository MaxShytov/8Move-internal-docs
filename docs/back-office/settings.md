# Настройки поставщика (Supplier Settings)

Настройки поставщика определяют глобальную конфигурацию для всех операций: валюта, налоги, выставление счетов, доставка, уведомления и контактная информация.

---

## Доступ

Боковая панель → **Settings** (только на десктопе)

!!! note "Мобильная версия"
    На мобильных устройствах и планшетах пункт Settings пока недоступен (показывается как «Coming soon»).

---

## Общие настройки (General Settings)

| Поле | Описание | Тип |
|------|----------|-----|
| **Self-Block Status** | Блокировка поставщика. Если включена — поставщик заблокирован | Переключатель |
| **Default Language** | Язык по умолчанию для поставщика: English / Deutsch / Français / Italiano | Выпадающий список |

---

## Контактная информация {#contact-info}

### Веб-сайт

| Поле | Описание |
|------|----------|
| **Website** | URL веб-сайта поставщика (например, `https://www.company.ch`) |

### Телефоны

Список телефонных номеров поставщика. Каждый номер содержит:

| Поле | Описание | Обязательное |
|------|----------|:------------:|
| **Phone Number** | Номер телефона | :white_check_mark: |
| **Phone Type** | Office / Mobile / Fax / Other | :white_check_mark: |
| **Label** | Произвольная метка | — |
| **Primary** | Отметить как основной | — |

Действия: добавить, редактировать, удалить.

### Email-адреса

Список email-адресов поставщика. Каждый адрес содержит:

| Поле | Описание | Обязательное |
|------|----------|:------------:|
| **Email** | Email-адрес | :white_check_mark: |
| **Label** | Произвольная метка | — |
| **Primary** | Отметить как основной | — |

### Адреса

Список адресов поставщика. Управление аналогично [адресам клиента](clients.md#addresses):

| Поле | Описание | Обязательное |
|------|----------|:------------:|
| **Label** | Метка (например, «Склад», «Офис») | — |
| **Address Type** | Other / Primary / Billing / Registered | — |
| **Address Line 1** | Улица, дом | :white_check_mark: |
| **Address Line 2** | Квартира, этаж | — |
| **City** | Город | :white_check_mark: |
| **Postal Code** | Почтовый индекс | :white_check_mark: |
| **State / Canton** | Кантон / регион | — |
| **Country Code** | Код страны (2 буквы, по умолчанию «CH») | :white_check_mark: |
| **Comment** | Комментарий | — |
| **Latitude / Longitude** | GPS-координаты | — |

---

## Доставка (Delivery Settings)

| Поле | Описание | Обязательное | Валидация |
|------|----------|:------------:|-----------|
| **Max Lead Time Days** | Максимальное время выполнения заказа (в днях) | :white_check_mark: | ≥ 0 |

---

## Ценообразование и налоги (Pricing & Tax)

| Поле | Описание | Тип |
|------|----------|-----|
| **Prices Include VAT** | Цены по умолчанию включают НДС | Переключатель |

При переключении отображается подтверждающее сообщение:

- **Включено** → «Prices now include VAT»
- **Выключено** → «Prices now exclude VAT»

---

## Выставление счетов (Invoicing) {#invoicing}

### Основные настройки

| Поле | Описание | Обязательное |
|------|----------|:------------:|
| **Invoicing Period** | Период выставления: Manual / Per Order / Daily / Weekly / Monthly | :white_check_mark: |
| **Weekly Day** | День недели (только для Weekly): Monday–Sunday | Для Weekly |
| **Monthly Day** | День месяца (только для Monthly): 1–28 | Для Monthly |
| **Default Payment Terms Days** | Срок оплаты по умолчанию (дней) | :white_check_mark: |
| **Default Bank Account** | Банковский счёт по умолчанию | — |

### Настройки номера счёта

| Поле | Описание | Обязательное |
|------|----------|:------------:|
| **Invoice Number Format** | Формат: Standard / Postal Year | :white_check_mark: |
| **Invoice Number Prefix** | Префикс (только для Standard формата). По умолчанию — первые 3 буквы названия поставщика | Для Standard |
| **Next Sequence Number** | Следующий порядковый номер (только для чтения) | — |

### Получатель уведомлений о заказах

| Поле | Описание |
|------|----------|
| **Order Notification Recipient** | Пользователь поставщика, который будет получать уведомления о новых заказах |

---

## Банковские счета {#bank-accounts}

Список банковских счетов поставщика. Используются при формировании [счетов](invoices.md).

Банковский счёт, выбранный как **Default**, подсвечивается в списке.

### Добавление / редактирование банковского счёта

| Поле | Описание | Обязательное |
|------|----------|:------------:|
| **Bank Name** | Название банка | :white_check_mark: |
| **IBAN** | Номер IBAN (например, `CH93 0076 2011 6238 5295 7`) | :white_check_mark: |
| **Currency** | Валюта счёта | :white_check_mark: |
| **Account Holder** | Владелец счёта | — |
| **BIC/SWIFT** | Код BIC/SWIFT (например, `POFICHBEXXX`) | — |
| **Bank Address** | Адрес банка | — |
| **Account Number** | Номер счёта | — |
| **Active** | Активен ли счёт | Переключатель |

### Назначение счёта по умолчанию

Нажмите :material-star: на нужном банковском счёте, затем сохраните настройки.

---

## Обработка заказов (Order Processing)

### Ограничения веса заказов

| Поле | Описание | Валидация |
|------|----------|-----------|
| **Min Order Weight (kg)** | Минимальный вес заказа в кг | ≥ 0 (если указано) |
| **Max Auto Order Weight (kg)** | Максимальный вес для автоматической обработки заказа | ≥ 0 (если указано) |

Эти значения используются как значения по умолчанию для клиентов, если у клиента не указаны собственные ограничения (см. [Клиенты → Ограничения веса](clients.md#weight-limits)).

---

## Интеграции (Integration)

### Google Maps API Keys

Опциональные ключи для интеграции Google Maps в приложениях:

| Поле | Описание |
|------|----------|
| **Web API Key** | Ключ для веб-приложения |
| **Android API Key** | Ключ для Android-приложения |
| **iOS API Key** | Ключ для iOS-приложения |

!!! info "Используются для карт"
    API-ключи необходимы для отображения карт в формах адресов (полигоны зон доставки, маркеры адресов).

---

## Сохранение

Нажмите **Save Settings** в нижней панели для сохранения всех изменений.

!!! warning "Адреса, телефоны, email"
    Телефоны, email-адреса и адреса поставщика сохраняются **мгновенно** при добавлении/редактировании/удалении (через отдельные диалоги). Они не зависят от кнопки «Save Settings».

---

## FAQ

??? question "Как изменить валюту?"
    Валюта привязана к банковскому счёту. Для изменения основной валюты создайте банковский счёт с нужной валютой и назначьте его как Default.

??? question "Как влияет 'Prices Include VAT' на заказы?"
    Эта настройка определяет значение по умолчанию для переключателя «Prices include VAT» в форме заказа. Она **не** пересчитывает существующие цены — только определяет, как интерпретируются новые цены.

??? question "Что произойдёт, если изменить период выставления счетов?"
    Новый период будет применяться ко всем клиентам, у которых не установлен собственный период (параметр «Default from Supplier» в настройках клиента).

??? question "Зачем нужен 'Max Lead Time Days'?"
    Это максимальное количество дней, на которое вперёд доступны слоты доставки при создании заказа. Например, если значение = 14, клиенты смогут выбирать слоты на ближайшие 2 недели.

??? question "Как добавить адрес поставщика для счетов?"
    Перейдите в секцию «Addresses» → «Add Address». Установите тип «Primary» или «Billing». Этот адрес будет отображаться в [счетах](invoices.md#detail) в секции «Supplier».
