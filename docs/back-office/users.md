# Пользователи (Users) и Пользователи поставщика (Supplier Users)

В Back Office есть два раздела для управления пользователями:

- **Users** — общее управление учётными записями (создание, редактирование, деактивация)
- **Supplier Users** — привязка пользователей к поставщику с назначением ролей

---

## Пользователи (Users)

### Доступ

Боковая панель → **Users** или Дашборд → **All Users**

### Список пользователей

#### Таблица

| Колонка | Описание | Сортировка |
|---------|----------|:----------:|
| **Avatar** | Аватар или инициалы | — |
| **Username** | Логин | :white_check_mark: |
| **Email** | Email-адрес | :white_check_mark: |
| **First Name** | Имя | :white_check_mark: |
| **Last Name** | Фамилия | :white_check_mark: |
| **Phone** | Телефон | — |
| **Date Joined** | Дата регистрации (дд/мм/гггг) | :white_check_mark: |
| **Status** | Бейдж: :material-check-circle:{ .green } Active или :material-cancel:{ .red } Inactive | — |

Нажатие на строку открывает форму редактирования.

#### Фильтры

| Фильтр | Тип | Описание |
|--------|-----|----------|
| **Search** | Текст | Поиск по имени, email |
| **Status** | Переключатель | «Active Only» (по умолчанию) / «All Users» |

---

### Форма пользователя {#user-form}

#### Аватар

Загрузка, изменение или удаление фотографии профиля.

#### Дата регистрации

При редактировании отображается дата и время (только для чтения).

#### Основные поля

| Поле | Описание | Обязательное | Валидация |
|------|----------|:------------:|-----------|
| **Email** | Email-адрес (также используется как логин) | :white_check_mark: | Не пустое, содержит `@` |
| **First Name** | Имя | — | |
| **Last Name** | Фамилия | — | |

!!! info "Username = Email"
    Логин (username) автоматически устанавливается равным email при сохранении.

#### Контактная информация

| Поле | Описание | Обязательное |
|------|----------|:------------:|
| **Phone** | Номер телефона | — |

#### Учётные данные (только при создании)

При создании нового пользователя отображается информационный блок:

> **Password Setup** — Email будет отправлен пользователю с инструкциями по установке пароля и активации аккаунта.

#### Сброс пароля (только при редактировании)

Кнопка **Send Password Reset Link** :material-lock-reset: рядом с полем Email. Отправляет пользователю email со ссылкой для сброса пароля.

#### Статус

Переключатель **Active User**:

- **Включён** — пользователь может входить в систему
- **Выключен** — доступ заблокирован

#### Предпочтения

| Поле | Описание |
|------|----------|
| **Default Language** | Предпочтительный язык: English / Deutsch / Français / Italiano |

#### Дополнительная информация

| Поле | Описание |
|------|----------|
| **Description** | Заметки о пользователе (многострочное, необязательное) |

#### Действия

| Кнопка | Описание |
|--------|----------|
| **Create User** / **Update User** | Сохранить |
| **Cancel** | Вернуться к списку без сохранения |
| **Delete** | Удалить пользователя (только при редактировании, с подтверждением) |

!!! tip "Привязка к клиенту"
    При создании пользователя через форму клиента (раздел «Client Users» → «Add User»), новый пользователь автоматически привязывается к этому клиенту.

---

## Пользователи поставщика (Supplier Users) {#supplier-users}

### Доступ

Боковая панель → **Supplier Users**

### Назначение

Этот раздел управляет **связями** между пользователями и поставщиком. Один пользователь может быть привязан к нескольким поставщикам с разными ролями.

### Таблица

| Колонка | Описание | Сортировка |
|---------|----------|:----------:|
| **Supplier** | Название поставщика (только в мультипоставщическом режиме) | :white_check_mark: |
| **Email** | Email пользователя (ссылка на форму пользователя) | :white_check_mark: |
| **First Name** | Имя | :white_check_mark: |
| **Last Name** | Фамилия | :white_check_mark: |
| **Role** | Роль (цветной бейдж) | :white_check_mark: |
| **Actions** | Кнопки действий | — |

#### Роли и их цвета

| Роль | Цвет бейджа | Описание |
|------|-------------|----------|
| **Admin** | :material-circle:{ .purple } Фиолетовый | Полный доступ |
| **Manager** | :material-circle:{ .blue } Синий | Управление заказами и продуктами |
| **Courier** | :material-circle:{ .green } Зелёный | Доступ к доставке |

#### Действия в строке

| Кнопка | Описание |
|--------|----------|
| :material-account-outline: **Edit User** | Перейти к форме пользователя |
| :material-badge-account-outline: **Change Role** | Изменить роль (открывает диалог) |
| :material-delete-outline: **Remove** | Удалить привязку (с подтверждением) |

### Фильтры

| Фильтр | Тип | Описание |
|--------|-----|----------|
| **Search** | Текст | Поиск по email или имени |
| **Role** | Выпадающий список | All roles / Admin / Manager / Courier |

### Добавление пользователя к поставщику

Нажмите **+ Add User** в заголовке.

| Поле | Описание | Обязательное | Примечание |
|------|----------|:------------:|------------|
| **Email** | Email пользователя | :white_check_mark: | Если пользователь с таким email существует — он будет привязан. Если нет — создан новый |
| **First Name** | Имя | — | Только при создании |
| **Last Name** | Фамилия | — | Только при создании |
| **Role** | Роль | :white_check_mark: | Admin / Manager / Courier (по умолчанию: Manager) |

### Изменение роли

Нажмите :material-badge-account-outline: в строке пользователя. Откроется диалог с полями:

- **Email** (только для чтения)
- **Role** — выбор новой роли

### Удаление привязки

Нажмите :material-delete-outline: → подтвердите в диалоге.

!!! warning "Последний пользователь"
    Удалить последнюю привязку пользователя к поставщику невозможно — система покажет ошибку «Cannot delete the last user».

---

## FAQ

??? question "В чём разница между Users и Supplier Users?"
    **Users** — это учётные записи (аккаунты). **Supplier Users** — это связи между аккаунтами и поставщиком с назначением роли. Один пользователь может быть привязан к нескольким поставщикам.

??? question "Как создать пользователя и сразу привязать к поставщику?"
    Используйте раздел **Supplier Users** → **Add User**. Если пользователя с таким email не существует, он будет создан автоматически и привязан к поставщику с выбранной ролью.

??? question "Как отправить пользователю ссылку для установки пароля?"
    Откройте форму пользователя → нажмите **Send Password Reset Link** рядом с полем Email.

??? question "Можно ли деактивировать пользователя, не удаляя его?"
    Да. Откройте форму пользователя → выключите переключатель **Active User**. Пользователь потеряет доступ к системе, но его аккаунт сохранится.
